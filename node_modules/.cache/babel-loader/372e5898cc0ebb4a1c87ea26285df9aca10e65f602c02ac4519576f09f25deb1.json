{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import ProductCard from\"./productcard\";import Spinner from\"../spinner\";// Import the spinner component\nimport\"./product.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductSlider=_ref=>{let{addToCart,searchQuery}=_ref;const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);// Track loading state\nconst[currentIndex,setCurrentIndex]=useState(0);const itemsPerPage=10;useEffect(()=>{const fetchProducts=async()=>{try{const response=await fetch(\"http://localhost:4000/products\");if(!response.ok){throw new Error(\"Failed to fetch products\");}const data=await response.json();setProducts(data);}catch(error){console.error(\"Error fetching products:\",error);alert(\"Could not fetch products. Please try again later.\");}finally{setLoading(false);}};fetchProducts();},[]);const filteredProducts=products.filter(product=>product.name.toLowerCase().includes(searchQuery.toLowerCase()));const handleNext=()=>{if(currentIndex+itemsPerPage<filteredProducts.length){setCurrentIndex(currentIndex+itemsPerPage);}};const handlePrevious=()=>{if(currentIndex-itemsPerPage>=0){setCurrentIndex(currentIndex-itemsPerPage);}};const currentProducts=filteredProducts.slice(currentIndex,currentIndex+itemsPerPage);return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/// Show spinner while loading\n_jsx(Spinner,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-container\",children:currentProducts.length>0?currentProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,addToCart:addToCart},product.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No products found\"})}),filteredProducts.length>itemsPerPage&&/*#__PURE__*/_jsxs(\"div\",{className:\"navigation-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevious,disabled:currentIndex===0,children:\"Previous\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,disabled:currentIndex+itemsPerPage>=filteredProducts.length,children:\"Next\"})]})]})});};export default ProductSlider;","map":{"version":3,"names":["React","useState","useEffect","ProductCard","Spinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductSlider","_ref","addToCart","searchQuery","products","setProducts","loading","setLoading","currentIndex","setCurrentIndex","itemsPerPage","fetchProducts","response","fetch","ok","Error","data","json","error","console","alert","filteredProducts","filter","product","name","toLowerCase","includes","handleNext","length","handlePrevious","currentProducts","slice","children","className","map","id","onClick","disabled"],"sources":["/Users/touchbar/Documents/GitHub/foodstuff-website/src/component/product/product.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ProductCard from \"./productcard\";\nimport Spinner from \"../spinner\"; // Import the spinner component\nimport \"./product.css\";\n\nconst ProductSlider = ({ addToCart, searchQuery }) => {\n    const [products, setProducts] = useState([]);\n    const [loading, setLoading] = useState(true); // Track loading state\n    const [currentIndex, setCurrentIndex] = useState(0);\n\n    const itemsPerPage = 10;\n\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const response = await fetch(\"http://localhost:4000/products\");\n                if (!response.ok) {\n                    throw new Error(\"Failed to fetch products\");\n                }\n                const data = await response.json();\n                setProducts(data);\n            } catch (error) {\n                console.error(\"Error fetching products:\", error);\n                alert(\"Could not fetch products. Please try again later.\");\n            } finally {\n                setLoading(false);\n            }\n            \n        };\n\n        fetchProducts();\n    }, []);\n\n    const filteredProducts = products.filter((product) =>\n        product.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n    const handleNext = () => {\n        if (currentIndex + itemsPerPage < filteredProducts.length) {\n            setCurrentIndex(currentIndex + itemsPerPage);\n        }\n    };\n\n    const handlePrevious = () => {\n        if (currentIndex - itemsPerPage >= 0) {\n            setCurrentIndex(currentIndex - itemsPerPage);\n        }\n    };\n\n    const currentProducts = filteredProducts.slice(\n        currentIndex,\n        currentIndex + itemsPerPage\n    );\n\n    return (\n        <div>\n            {loading ? ( // Show spinner while loading\n                <Spinner />\n            ) : (\n                <>\n                    <div className=\"product-container\">\n                        {currentProducts.length > 0 ? (\n                            currentProducts.map((product) => (\n                                <ProductCard\n                                    key={product.id}\n                                    product={product}\n                                    addToCart={addToCart}\n                                />\n                            ))\n                        ) : (\n                            <p>No products found</p>\n                        )}\n                    </div>\n                    {filteredProducts.length > itemsPerPage && (\n                        <div className=\"navigation-buttons\">\n                            <button\n                                onClick={handlePrevious}\n                                disabled={currentIndex === 0}\n                            >\n                                Previous\n                            </button>\n                            <button\n                                onClick={handleNext}\n                                disabled={\n                                    currentIndex + itemsPerPage >=\n                                    filteredProducts.length\n                                }\n                            >\n                                Next\n                            </button>\n                        </div>\n                    )}\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default ProductSlider;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,OAAO,KAAM,YAAY,CAAE;AAClC,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvB,KAAM,CAAAC,aAAa,CAAGC,IAAA,EAAgC,IAA/B,CAAEC,SAAS,CAAEC,WAAY,CAAC,CAAAF,IAAA,CAC7C,KAAM,CAACG,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC9C,KAAM,CAACkB,YAAY,CAAEC,eAAe,CAAC,CAAGnB,QAAQ,CAAC,CAAC,CAAC,CAEnD,KAAM,CAAAoB,YAAY,CAAG,EAAE,CAEvBnB,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAoB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,gCAAgC,CAAC,CAC9D,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,0BAA0B,CAAC,CAC/C,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClCZ,WAAW,CAACW,IAAI,CAAC,CACrB,CAAE,MAAOE,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDE,KAAK,CAAC,mDAAmD,CAAC,CAC9D,CAAC,OAAS,CACNb,UAAU,CAAC,KAAK,CAAC,CACrB,CAEJ,CAAC,CAEDI,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAU,gBAAgB,CAAGjB,QAAQ,CAACkB,MAAM,CAAEC,OAAO,EAC7CA,OAAO,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvB,WAAW,CAACsB,WAAW,CAAC,CAAC,CACjE,CAAC,CAED,KAAM,CAAAE,UAAU,CAAGA,CAAA,GAAM,CACrB,GAAInB,YAAY,CAAGE,YAAY,CAAGW,gBAAgB,CAACO,MAAM,CAAE,CACvDnB,eAAe,CAACD,YAAY,CAAGE,YAAY,CAAC,CAChD,CACJ,CAAC,CAED,KAAM,CAAAmB,cAAc,CAAGA,CAAA,GAAM,CACzB,GAAIrB,YAAY,CAAGE,YAAY,EAAI,CAAC,CAAE,CAClCD,eAAe,CAACD,YAAY,CAAGE,YAAY,CAAC,CAChD,CACJ,CAAC,CAED,KAAM,CAAAoB,eAAe,CAAGT,gBAAgB,CAACU,KAAK,CAC1CvB,YAAY,CACZA,YAAY,CAAGE,YACnB,CAAC,CAED,mBACIf,IAAA,QAAAqC,QAAA,CACK1B,OAAO,cAAK;AACTX,IAAA,CAACF,OAAO,GAAE,CAAC,cAEXI,KAAA,CAAAE,SAAA,EAAAiC,QAAA,eACIrC,IAAA,QAAKsC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAC7BF,eAAe,CAACF,MAAM,CAAG,CAAC,CACvBE,eAAe,CAACI,GAAG,CAAEX,OAAO,eACxB5B,IAAA,CAACH,WAAW,EAER+B,OAAO,CAAEA,OAAQ,CACjBrB,SAAS,CAAEA,SAAU,EAFhBqB,OAAO,CAACY,EAGhB,CACJ,CAAC,cAEFxC,IAAA,MAAAqC,QAAA,CAAG,mBAAiB,CAAG,CAC1B,CACA,CAAC,CACLX,gBAAgB,CAACO,MAAM,CAAGlB,YAAY,eACnCb,KAAA,QAAKoC,SAAS,CAAC,oBAAoB,CAAAD,QAAA,eAC/BrC,IAAA,WACIyC,OAAO,CAAEP,cAAe,CACxBQ,QAAQ,CAAE7B,YAAY,GAAK,CAAE,CAAAwB,QAAA,CAChC,UAED,CAAQ,CAAC,cACTrC,IAAA,WACIyC,OAAO,CAAET,UAAW,CACpBU,QAAQ,CACJ7B,YAAY,CAAGE,YAAY,EAC3BW,gBAAgB,CAACO,MACpB,CAAAI,QAAA,CACJ,MAED,CAAQ,CAAC,EACR,CACR,EACH,CACL,CACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAhC,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}