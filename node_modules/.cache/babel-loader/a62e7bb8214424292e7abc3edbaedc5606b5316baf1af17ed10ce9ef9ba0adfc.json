{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{FaTimes}from\"react-icons/fa\";import{useNavigate}from\"react-router-dom\";import\"./cart.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cart(_ref){let{cartRef}=_ref;const loadCart=()=>JSON.parse(localStorage.getItem(\"cart\"))||[];const[cart,setCart]=useState(loadCart());const navigate=useNavigate();const[alertMessage,setAlertMessage]=useState(\"\");// State for alert message\n// Update cart in both state and localStorage\nconst updateCart=newCart=>{setCart(newCart);localStorage.setItem(\"cart\",JSON.stringify(newCart));};// Remove product from cart\nconst removeFromCart=index=>{const productName=cart[index].name;// Get the product name for the alert\nconst updatedCart=cart.filter((_,i)=>i!==index);updateCart(updatedCart);setAlertMessage(`${productName} has been removed from the cart.`);// Set alert message\n};// Increase product quantity\nconst increaseQuantity=index=>{const updatedCart=cart.map((item,i)=>i===index?{...item,quantity:item.quantity+1}:item);updateCart(updatedCart);};// Decrease product quantity\nconst decreaseQuantity=index=>{const updatedCart=cart.map((item,i)=>i===index&&item.quantity>1?{...item,quantity:item.quantity-1}:item);updateCart(updatedCart);};// Close the cart\nconst handleCartClose=()=>{if(cartRef!==null&&cartRef!==void 0&&cartRef.current){cartRef.current.classList.remove(\"active\");}};// Navigate to checkout page\nconst handleCheckout=()=>{navigate(\"/checkout\");};const[fadeOut,setFadeOut]=useState(false);useEffect(()=>{if(alertMessage){const timer=setTimeout(()=>{setFadeOut(true);// Trigger fade out\nconst removeAlertTimer=setTimeout(()=>{setAlertMessage(\"\");// Clear the alert after fade out\nsetFadeOut(false);// Reset fade out state\n},500);// Match this time with the CSS transition duration\nreturn()=>clearTimeout(removeAlertTimer);},5000);// Keep alert message visible for 5 seconds\nreturn()=>clearTimeout(timer);// Cleanup the timer on unmount\n}},[alertMessage]);return/*#__PURE__*/_jsx(\"main\",{className:\"cart-main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-section-text\",children:[/*#__PURE__*/_jsx(FaTimes,{className:\"times\",onClick:handleCartClose}),/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-list\",children:/*#__PURE__*/_jsx(\"div\",{className:\"cart-list-1\",children:cart.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Your cart is empty\"}):cart.map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-details\",children:[/*#__PURE__*/_jsx(\"p\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",(product.price*product.quantity).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-1\",onClick:()=>decreaseQuantity(index),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:product.quantity}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-1\",onClick:()=>increaseQuantity(index),children:\"+\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-2\",onClick:()=>removeFromCart(index),children:\"Remove\"})]})]},index))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total: $\",cart.reduce((total,product)=>total+product.price*product.quantity,0).toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckout,children:\"Proceed to Checkout\"})]}),alertMessage&&/*#__PURE__*/_jsx(\"div\",{className:`alert-popup ${fadeOut?'alert-popup-exit':''}`,children:alertMessage})]})});}","map":{"version":3,"names":["React","useState","useEffect","FaTimes","useNavigate","jsx","_jsx","jsxs","_jsxs","Cart","_ref","cartRef","loadCart","JSON","parse","localStorage","getItem","cart","setCart","navigate","alertMessage","setAlertMessage","updateCart","newCart","setItem","stringify","removeFromCart","index","productName","name","updatedCart","filter","_","i","increaseQuantity","map","item","quantity","decreaseQuantity","handleCartClose","current","classList","remove","handleCheckout","fadeOut","setFadeOut","timer","setTimeout","removeAlertTimer","clearTimeout","className","children","onClick","length","product","price","toFixed","reduce","total"],"sources":["/Users/touchbar/Documents/GitHub/foodstuff-website/src/component/cart/cart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { FaTimes } from \"react-icons/fa\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./cart.css\";\n\nexport default function Cart({ cartRef }) {\n    const loadCart = () => JSON.parse(localStorage.getItem(\"cart\")) || [];\n    const [cart, setCart] = useState(loadCart());\n    const navigate = useNavigate();\n    const [alertMessage, setAlertMessage] = useState(\"\"); // State for alert message\n\n    // Update cart in both state and localStorage\n    const updateCart = (newCart) => {\n        setCart(newCart);\n        localStorage.setItem(\"cart\", JSON.stringify(newCart));\n    };\n\n    // Remove product from cart\n    const removeFromCart = (index) => {\n        const productName = cart[index].name; // Get the product name for the alert\n        const updatedCart = cart.filter((_, i) => i !== index);\n        updateCart(updatedCart);\n        setAlertMessage(`${productName} has been removed from the cart.`); // Set alert message\n    };\n\n    // Increase product quantity\n    const increaseQuantity = (index) => {\n        const updatedCart = cart.map((item, i) =>\n            i === index ? { ...item, quantity: item.quantity + 1 } : item\n        );\n        updateCart(updatedCart);\n    };\n\n    // Decrease product quantity\n    const decreaseQuantity = (index) => {\n        const updatedCart = cart.map((item, i) =>\n            i === index && item.quantity > 1\n                ? { ...item, quantity: item.quantity - 1 }\n                : item\n        );\n        updateCart(updatedCart);\n    };\n\n    // Close the cart\n    const handleCartClose = () => {\n        if (cartRef?.current) {\n            cartRef.current.classList.remove(\"active\");\n        }\n    };\n\n    // Navigate to checkout page\n    const handleCheckout = () => {\n        navigate(\"/checkout\");\n    };\n\n    const [fadeOut, setFadeOut] = useState(false);\n\n    useEffect(() => {\n        if (alertMessage) {\n            const timer = setTimeout(() => {\n                setFadeOut(true); // Trigger fade out\n                const removeAlertTimer = setTimeout(() => {\n                    setAlertMessage(\"\"); // Clear the alert after fade out\n                    setFadeOut(false); // Reset fade out state\n                }, 500); // Match this time with the CSS transition duration\n\n                return () => clearTimeout(removeAlertTimer);\n            }, 5000); // Keep alert message visible for 5 seconds\n\n            return () => clearTimeout(timer); // Cleanup the timer on unmount\n        }\n    }, [alertMessage]);\n\n    return (\n        <main className=\"cart-main\">\n            {/* Cart Section */}\n            <div className=\"cart-section\">\n                <div className=\"cart-section-text\">\n                    <FaTimes className=\"times\" onClick={handleCartClose} />\n                    <h2>Shopping Cart</h2>\n                </div>\n                <div className=\"cart-list\">\n                  <div className=\"cart-list-1\">\n                  {cart.length === 0 ? (\n                        <p>Your cart is empty</p>\n                    ) : (\n                        cart.map((product, index) => (\n                            <div key={index} className=\"cart-item\">\n                                <div className=\"cart-item-details\">\n                                    <p>{product.name}</p>\n                                    <p>${(product.price * product.quantity).toFixed(2)}</p>\n                                </div>\n                                <div className=\"cart-item-controls\">\n                                    <div className=\"quantity-controls\">\n                                        <button className=\"btn-1\" onClick={() => decreaseQuantity(index)}>-</button>\n                                        <span>{product.quantity}</span>\n                                        <button className=\"btn-1\" onClick={() => increaseQuantity(index)}>+</button>\n                                    </div>\n                                    <button className=\"btn-2\" onClick={() => removeFromCart(index)}>Remove</button>\n                                </div>\n                             \n                            </div>\n                        ))\n                    )}\n                  </div>\n                </div>\n                <div className=\"cart-total\">\n                    <h4>\n                        Total: $\n                        {cart\n                            .reduce(\n                                (total, product) => total + product.price * product.quantity,\n                                0\n                            )\n                            .toFixed(2)}\n                    </h4>\n                    <button onClick={handleCheckout}>Proceed to Checkout</button>\n                </div>\n                \n                \n                {alertMessage && (\n                    <div className={`alert-popup ${fadeOut ? 'alert-popup-exit' : ''}`}>\n                        {alertMessage}\n                    </div>\n                )}\n            </div>\n        </main>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}