{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./admin.css';// Import the CSS file for styles\nimport{useNavigate}from'react-router-dom';// Import the navigate function from react-router-dom\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[products,setProducts]=useState([]);const[productData,setProductData]=useState({id:'',name:'',price:'',img:''});const[isEditing,setIsEditing]=useState(false);const[salesData,setSalesData]=useState([]);const navigate=useNavigate();useEffect(()=>{fetchProducts();fetchSalesData();},[]);const fetchProducts=async()=>{try{const response=await fetch('http://localhost:4000/products');const data=await response.json();setProducts(data);}catch(error){console.error('Error fetching products:',error);}};const fetchSalesData=async()=>{try{const response=await fetch('http://localhost:4000/sales');// Assuming sales endpoint\nconst data=await response.json();setSalesData(data);}catch(error){console.error('Error fetching sales data:',error);}};const handleChange=e=>{setProductData({...productData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{if(isEditing){await fetch(`http://localhost:4000/products/${productData.id}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(productData)});}else{await fetch('http://localhost:4000/products',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(productData)});}fetchProducts();resetForm();}catch(error){console.error('Error saving product:',error);}};const resetForm=()=>{setProductData({id:'',name:'',price:'',img:''});setIsEditing(false);};const handleEdit=product=>{setProductData(product);setIsEditing(true);};const handleDelete=async id=>{try{await fetch(`http://localhost:4000/products/${id}`,{method:'DELETE'});fetchProducts();}catch(error){console.error('Error deleting product:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dashboard-title\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"analytics-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Analytics Overview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Products\"}),/*#__PURE__*/_jsx(\"p\",{children:products.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Sales\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",salesData.reduce((total,sale)=>total+sale.amount,0).toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"analytics-card\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Registered Users\"})})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"product-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:productData.name,onChange:handleChange,placeholder:\"Product Name\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",value:productData.price,onChange:handleChange,placeholder:\"Product Price\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"img\",value:productData.img,onChange:handleChange,placeholder:\"Product Image URL\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex btn-div\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:isEditing?'Update Product':'Add Product'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigate('/');},className:\"submit-button\",children:\"Return to Homepage\"})]}),isEditing&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-button\",onClick:resetForm,children:\"Cancel\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"products-list-title\",children:\"Products List\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"products-list row\",children:products.map(product=>/*#__PURE__*/_jsxs(\"li\",{className:\"product-item col-12 col-md-6\",children:[/*#__PURE__*/_jsx(\"h4\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",product.price]}),/*#__PURE__*/_jsx(\"img\",{src:product.img,alt:product.name,className:\"product-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit-button\",onClick:()=>handleEdit(product),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDelete(product.id),children:\"Delete\"})]})]},product.id))})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminDashboard","products","setProducts","productData","setProductData","id","name","price","img","isEditing","setIsEditing","salesData","setSalesData","navigate","fetchProducts","fetchSalesData","response","fetch","data","json","error","console","handleChange","e","target","value","handleSubmit","preventDefault","method","headers","body","JSON","stringify","resetForm","handleEdit","product","handleDelete","className","children","length","reduce","total","sale","amount","toFixed","onSubmit","type","onChange","placeholder","required","onClick","map","src","alt"],"sources":["/Users/touchbar/Documents/GitHub/foodstuff-website/src/pages/adminDashboard/admin.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './admin.css'; // Import the CSS file for styles\nimport { useNavigate } from 'react-router-dom'; // Import the navigate function from react-router-dom\n\nconst AdminDashboard = () => {\n    const [products, setProducts] = useState([]);\n    const [productData, setProductData] = useState({ id: '', name: '', price: '', img: '' });\n    const [isEditing, setIsEditing] = useState(false);\n    const [salesData, setSalesData] = useState([]);\n\n    const navigate = useNavigate(); \n\n    useEffect(() => {\n        fetchProducts();\n        fetchSalesData();\n   \n    }, []);\n\n    const fetchProducts = async () => {\n        try {\n            const response = await fetch('http://localhost:4000/products');\n            const data = await response.json();\n            setProducts(data);\n        } catch (error) {\n            console.error('Error fetching products:', error);\n        }\n    };\n\n    const fetchSalesData = async () => {\n        try {\n            const response = await fetch('http://localhost:4000/sales'); // Assuming sales endpoint\n            const data = await response.json();\n            setSalesData(data);\n        } catch (error) {\n            console.error('Error fetching sales data:', error);\n        }\n    };\n\n \n\n    const handleChange = (e) => {\n        setProductData({ ...productData, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            if (isEditing) {\n                await fetch(`http://localhost:4000/products/${productData.id}`, {\n                    method: 'PUT',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(productData),\n                });\n            } else {\n                await fetch('http://localhost:4000/products', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(productData),\n                });\n            }\n            fetchProducts();\n            resetForm();\n        } catch (error) {\n            console.error('Error saving product:', error);\n        }\n    };\n\n    const resetForm = () => {\n        setProductData({ id: '', name: '', price: '', img: '' });\n        setIsEditing(false);\n    };\n\n    const handleEdit = (product) => {\n        setProductData(product);\n        setIsEditing(true);\n    };\n\n    const handleDelete = async (id) => {\n        try {\n            await fetch(`http://localhost:4000/products/${id}`, {\n                method: 'DELETE',\n            });\n            fetchProducts();\n        } catch (error) {\n            console.error('Error deleting product:', error);\n        }\n    };\n\n    return (\n        <div className=\"admin-dashboard\">\n            <h2 className=\"dashboard-title\">Admin Dashboard</h2>\n\n            {/* Basic Analytics Section */}\n            <section className=\"analytics-section\">\n                <h3>Analytics Overview</h3>\n                <div className=\"analytics-cards\">\n                    <div className=\"analytics-card\">\n                        <h4>Total Products</h4>\n                        <p>{products.length}</p>\n                    </div>\n                    <div className=\"analytics-card\">\n                        <h4>Total Sales</h4>\n                        <p>${salesData.reduce((total, sale) => total + sale.amount, 0).toFixed(2)}</p>\n                    </div>\n                    <div className=\"analytics-card\">\n                        <h4>Registered Users</h4>\n                    </div>\n                </div>\n            </section>\n\n            {/* Product Management Form */}\n            <form className=\"product-form\" onSubmit={handleSubmit}>\n                <input\n                    type=\"text\"\n                    name=\"name\"\n                    value={productData.name}\n                    onChange={handleChange}\n                    placeholder=\"Product Name\"\n                    required\n                />\n                <input\n                    type=\"number\"\n                    name=\"price\"\n                    value={productData.price}\n                    onChange={handleChange}\n                    placeholder=\"Product Price\"\n                    required\n                />\n                <input\n                    type=\"text\"\n                    name=\"img\"\n                    value={productData.img}\n                    onChange={handleChange}\n                    placeholder=\"Product Image URL\"\n                    required\n                />\n                <div className='d-flex btn-div'>\n                    <button type=\"submit\" className=\"submit-button\">\n                        {isEditing ? 'Update Product' : 'Add Product'}\n                    </button>\n                    <button onClick={() => { navigate('/') }} className=\"submit-button\">\n                        Return to Homepage\n                    </button>\n                </div>\n                {isEditing && <button type=\"button\" className=\"cancel-button\" onClick={resetForm}>Cancel</button>}\n            </form>\n\n            {/* Products List */}\n            <h3 className=\"products-list-title\">Products List</h3>\n            <ul className=\"products-list row\">\n                {products.map(product => (\n                    <li key={product.id} className=\"product-item col-12 col-md-6\">\n                        <h4>{product.name}</h4>\n                        <p>Price: ${product.price}</p>\n                        <img src={product.img} alt={product.name} className=\"product-image\" />\n                        <div className=\"product-actions\">\n                            <button className=\"edit-button\" onClick={() => handleEdit(product)}>Edit</button>\n                            <button className=\"delete-button\" onClick={() => handleDelete(product.id)}>Delete</button>\n                        </div>\n                    </li>\n                ))}\n            </ul>\n\n         \n        </div>\n    );\n};\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}